<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Incendios NASA FIRMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Fuente formal desde Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Merriweather&display=swap" rel="stylesheet">
 
  <!-- Hoja de estilos Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
</head>

<body>
  <div id="header">
  <img src="img_logo/logo.png" alt="Logo" id="logo">
  <h1>Incendios detectados por sat칠lites (NASA FIRMS)</h1>
  </div>

  <!-- Selector de capas desde PostGIS -->
  <div id="layer-selector" style="position:absolute; top:60px; left:10px; z-index:1100; background:white; padding:8px; border-radius:5px; box-shadow:0 0 6px rgba(0,0,0,0.3);">
    <label for="layerSelect"><strong>Capa a visualizar:</strong></label><br>
    <select id="layerSelect">
      <option disabled selected>-- Selecciona una capa --</option>
      <!-- Opciones se llenar치n din치micamente -->
    </select>
  </div>
 
  <!-- Bot칩n flotante para mostrar/ocultar el dashboard -->
  <div id="dashboard-toggle">游띋</div>
   
  <!-- Panel de dashboard colapsable -->
  <div id="dashboard" class="dashboard hidden">
    <div class="dashboard-text">
      <h4>Resumen</h4>
      <p>Total de incendios: <span id="total-incendios">0</span></p>
      <p>Confianza alta: <span id="alta">0</span></p>
      <p>Confianza nominal: <span id="nominal">0</span></p>
      <p>Confianza baja: <span id="baja">0</span></p>
      <p>FRP total: <span id="frp-total">0</span></p>
      <p>FRP promedio: <span id="frp-prom">0</span></p>
      <hr>
      <ul id="por-satelite"></ul>
    </div>

    <div class="dashboard-charts">
      <!-- Contenedor para el gr치fico de barras -->
      <div class="chart-wrapper">
        <canvas id="confChart"></canvas>
      </div>
      
      <!-- Contenedor para el gr치fico de pastel -->
      <div class="chart-wrapper">
        <canvas id="satChart"></canvas>
      </div>
    </div>
  </div>

  <div id="map"></div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="{{ url_for('static', filename='js/mapa.js') }}"></script>
</body>
</html>
